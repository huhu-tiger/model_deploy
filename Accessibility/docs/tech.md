# 辅助下载接口技术文档

## 功能描述
该接口用于从请求参数中提取指定的 URL，下载文件到本地临时目录，并将文件上传到 MinIO 存储，最后返回 MinIO 的下载地址。

## 技术实现

### 1. URL 提取
- 使用 JSONPath 表达式从请求数据中提取目标 URL。
- 支持多种类型的资源（音频、视频、图片等）。

### 2. 文件下载
- 使用 `requests` 库通过 HTTP 下载文件。
- 支持通过代理下载。
- 下载的文件存储在临时目录中。

### 3. 文件上传
- 使用 MinIO 客户端将下载的文件上传到指定的存储桶。
- 上传路径根据文件类型和时间戳动态生成。

### 4. 响应封装
- 将原始 URL 替换为 MinIO 的下载地址。
- 返回包含更新后数据的 JSON 响应。

## 依赖库
- `jsonpath-ng`: 用于解析 JSONPath 表达式。
- `requests`: 用于 HTTP 文件下载。
- `minio`: 用于与 MinIO 存储交互。

## 处理流程
1. 接收请求数据，解析 `download_url_jsonpath` 和 `data` 字段。
2. 遍历 `download_url_jsonpath`，提取所有匹配的 URL。
3. 对每个 URL：
   - 下载文件到临时目录。
   - 上传文件到 MinIO，获取下载地址。
   - 更新原始数据中的 URL。
4. 返回更新后的数据。


## 注意事项
- 确保 MinIO 存储桶已创建并配置正确。
- 下载和上传操作可能会消耗较多时间，建议在生产环境中优化性能。
- 处理大文件时，请注意磁盘空间和网络带宽的限制。

## 测试
- 使用文档中的请求示例进行测试。
- 验证返回的 MinIO 地址是否正确可用。